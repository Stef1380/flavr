<div class="dashboard-banner">
  <div class="dashboard-container">
    <div class="position-absolute top-0 start-0 p-3">
      <%= link_to root_path do %>
        <%= image_tag 'logo.png', alt: 'Flavr Logo', class: 'green-logo' %>
      <% end %>
    </div>

    <div class="logo-profil">
      <%= image_tag 'constance.png', alt: 'Profil 1 Logo', class: 'constance-logo' %>
      <div class="profil-username">
        <%= @profil.username  %>
      </div>
      <div class="profil-age">
        <%= @profil.age %> ans
      </div>
    </div>
  </div>
</div>
<div class="container" data-controller="profil-edit">
    <div class="cards-profil row" data-profil-edit-target="divg">
      <div class="card-profil col-5 mb-4" data-profil-edit-target="regime">
            <div>
            Mon régime Alimentaire
            </div>
            <%= @profil.diet.name %>
          <button class="button-profil"data-profil-edit-target="regimebtn" data-action= "click->profil-edit#regimeEdit">
            <i class="fa-solid fa-pen"></i>
          </button>
      </div>
      <div class="card-profil col-5 mb-4" data-profil-edit-target="objectif">
        <div>
          Mon objectif santé
        </div>
          <%= @profil.target.name %>
        <button class="button-profil" data-profil-edit-target="objectifbtn" data-action= "click->profil-edit#ObjectifEdit">
          <i class="fa-solid fa-pen"></i>
        </button>
      </div>
      <div class="card-profil col-5 mb-4" data-profil-edit-target="Restriction">
        <div>
          Mes restrictions alimentaires
        </div>
          <% @profil.restrictions.each do |restriction| %>
            <%= restriction.name %>
          <% end %>
        <button class="button-profil" data-profil-edit-target="Restrictionbtn" data-action= "click->profil-edit#RestrictionEdit">
          <i class="fa-solid fa-pen"></i>
        </button>
      </div>
      <div class="card-profil col-5 mb-4">
        <div>
          Mes préferences alimentaires
        </div>
      </div>
    </div>

  <div data-profil-edit-target="divg2" class="d-none">
    <div data-profil-edit-target="formrestriction" class="card-edit d-none">
      <%= simple_form_for @profil, url: update_profil_restrictions_profil_profil_path(@profil), method: :patch do |form| %>
        <h3>Sélectionnez vos restrictions :</h3>
        <h5>Choisissez-en plus d'un :</h5>
        <% @restrictions.each do |restriction| %>
        <div class="form-group form-switch form-switch-lg">
          <%= label_tag "restriction_ids_#{restriction.id}", restriction.name %>
          <%= check_box_tag 'restriction_ids[]', restriction.id, @profil.restriction_ids.include?(restriction.id), class: "form-check-input form-switch-input"  %>
        </div>
        <% end %>
        <%= button_tag(type: 'submit', class: 'btn') do %>
          <i class="fa-solid fa-check"></i>
        <% end %>
      <% end %>
    </div>

  <div data-profil-edit-target="formregime" class="card-edit d-none">
    <%= simple_form_for @profil, url: update_profil_profil_path(@profil), method: :patch do |form| %>
      <h3>Sélectionnez votre régime principal :</h3>
      <h5>Choisissez-en un :</h5>
      <% @diets.each do |diet| %>
        <div class="form-group form-switch form-switch-lg">
          <%= form.label :diet_id, diet.name, value: diet.id %>
          <%= form.radio_button :diet_id, diet.id, class: "form-check-input form-switch-input" %>
        </div>
      <% end %>
      <%= button_tag(type: 'submit', class: 'btn') do %>
        <i class="fa-solid fa-check"></i>
      <% end %>
    <% end %>
  </div>

    <div data-profil-edit-target="formobjectif" class="card-edit d-none">
      <%= simple_form_for @profil, url: update_profil_profil_path(@profil), method: :patch do |form| %>
        <h3>Sélectionnez votre objectif principale :</h3>
        <h5>Choisissez-en un :</h5>
        <% @targets.each do |target| %>
          <div class="form-group form-switch form-switch-lg">
            <%= form.label :target_id, target.name, value: target.id %>
            <%= form.radio_button :target_id, target.id, class: "form-check-input form-switch-input" %>
          </div>
        <% end %>
        <%= button_tag(type: 'submit', class: 'btn') do %>
            <i class="fa-solid fa-check"></i>
            <% end %>
        <% end %>
      </div>
    </div>
</div>

<%= render "pages/navbar" %>
